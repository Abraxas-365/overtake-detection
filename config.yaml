# config.yaml
model:
  path: "/home/edartru/InEdge/poc-minsur/models/ufldv2_culane_res34_320x1600.onnx"
  input_width: 1600
  input_height: 320
  num_anchors: 72
  num_lanes: 4
  griding_num: 200

inference:
  use_tensorrt: true
  use_fp16: true
  enable_engine_cache: true
  engine_cache_path: "/home/edartru/InEdge/poc-minsur/cache"
  num_threads: 4

detection:
  confidence_threshold: 0.25
  min_points_per_lane: 3
  smoother_window_size: 10
  calibration_frames: 90
  debounce_frames: 10
  confirm_frames: 12
  min_lane_confidence: 0.25
  min_position_confidence: 0.3
  drift_threshold: 0.30           # Start noticing at 30%
  crossing_threshold: 0.48        # Confirm at 48% (balanced)
  cooldown_frames: 90
  min_lane_change_duration_ms: 1200
  max_lane_change_duration_ms: 8000
  skip_initial_frames: 100
  require_both_lanes: false

overtake:
  lane_change_offset_threshold: 0.6
  debounce_frames: 5
  confirm_frames: 8
  max_window_seconds: 15.0
  min_interval_seconds: 2.0

video:
  input_dir: "/home/edartru/InEdge/poc-minsur/videos/lima"
  output_dir: "/home/edartru/InEdge/poc-minsur/output"
  source_width: 1280
  source_height: 720
  target_fps: 30
  save_annotated: true
  save_events_only: false

logging:
  level: "info"

# v9.0: Remote verification â€” send maneuver frames to a server with a better
# model (VLM) for line-type verification.  Disabled by default.
remote_verification:
  enabled: false
  server_url: "http://localhost:8080"
  timeout_secs: 30
  # true = fire-and-forget (non-blocking), false = wait for server response
  async_mode: true
  # Minimum server confidence to override local legality decision
  min_override_confidence: 0.70
  # Ring buffer size (~10s at 30fps)
  frame_buffer_capacity: 300
  jpeg_quality: 80

